name: Deploy Hugo Site

on:
  push:
    branches:
      - master  # Aceasta este ramura din care vrei să preiei codul

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout source repository
      uses: actions/checkout@v2
      with:
        repository: mer0x/source.merox.dev  # Înlocuiește "username" cu numele tău de utilizator GitHub
        token: ${{ secrets.PAT_TOKEN }}
        path: source  # Poți schimba aceasta dacă dorești un alt nume pentru folder

    - name: Set up Hugo
      uses: peaceiris/actions-hugo@v2
      with:
        hugo-version: 'latest'

    - name: Build the site
      run: |
        cd source  # Intră în directorul sursă
        hugo --minify

    - name: Deploy to GitHub Pages
      uses: JamesIves/github-pages-deploy-action@v4
      with:
        branch: gh-pages  # Asigură-te că această ramură există în repo-ul public
        folder: public  
        token: ${{ secrets.PAT_TOKEN }}
